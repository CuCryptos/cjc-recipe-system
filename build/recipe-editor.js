(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var a in l)e.o(l,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:l[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,l=window.wp.i18n,a=window.React,n=window.wp.element,c=window.wp.data,i=window.wp.blockEditor,r=window.wp.components,s=window.wp.apiFetch;var o=e.n(s);const d={amount:"",unit:"",name:"",notes:""},p=["","cup","cups","tbsp","tsp","oz","lb","g","kg","ml","l","slice","slices","piece","pieces","clove","cloves","pinch","dash","handful","bunch","can","package","small","medium","large"];function u({ingredients:e=[],onChange:t}){const[c,i]=(0,n.useState)(null),[s,o]=(0,n.useState)(null),u=e.length>0?e:[{title:"",items:[]}],_=e=>{t(e)},m=(e,t,l,a)=>{const n=[...u],c=[...n[e].items];c[t]={...c[t],[l]:a},n[e]={...n[e],items:c},_(n)},h=()=>{i(null),o(null)};return(0,a.createElement)("div",{className:"cjc-ingredients-editor"},u.map((e,t)=>(0,a.createElement)("div",{key:t,className:"cjc-ingredients-group"},u.length>1&&(0,a.createElement)(r.Flex,{className:"cjc-ingredients-group-header"},(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)(r.TextControl,{placeholder:(0,l.__)("Group title (optional)","suspended-flavor-child"),value:e.title,onChange:e=>((e,t)=>{const l=[...u];l[e]={...l[e],title:t},_(l)})(t,e)})),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.Button,{icon:"trash",label:(0,l.__)("Remove group","suspended-flavor-child"),onClick:()=>(e=>{if(u.length<=1)return;const t=u.filter((t,l)=>l!==e);_(t)})(t),isDestructive:!0}))),(0,a.createElement)("div",{className:"cjc-ingredients-list"},e.items.map((e,n)=>(0,a.createElement)("div",{key:n,className:"cjc-ingredient-item",draggable:!0,onDragStart:e=>((e,t,l)=>{i({group:t,item:l}),o("item"),e.dataTransfer.effectAllowed="move"})(e,t,n),onDragOver:e=>((e,t,l)=>{e.preventDefault(),"item"===s&&c.group===t&&c.item!==l&&(((e,t,l)=>{if(t===l)return;const a=[...u],n=[...a[e].items],[c]=n.splice(t,1);n.splice(l,0,c),a[e]={...a[e],items:n},_(a)})(t,c.item,l),i({group:t,item:l}))})(e,t,n),onDragEnd:h},(0,a.createElement)("span",{className:"cjc-ingredient-drag-handle dashicons dashicons-menu"}),(0,a.createElement)(r.Flex,{gap:2,wrap:!0},(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.TextControl,{placeholder:(0,l.__)("Amt","suspended-flavor-child"),value:e.amount,onChange:e=>m(t,n,"amount",e),className:"cjc-ingredient-amount"})),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)("select",{value:e.unit,onChange:e=>m(t,n,"unit",e.target.value),className:"cjc-ingredient-unit components-select-control__input"},p.map(e=>(0,a.createElement)("option",{key:e,value:e},e||(0,l.__)("unit","suspended-flavor-child"))))),(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)(r.TextControl,{placeholder:(0,l.__)("Ingredient name","suspended-flavor-child"),value:e.name,onChange:e=>m(t,n,"name",e),className:"cjc-ingredient-name"})),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.TextControl,{placeholder:(0,l.__)("Notes","suspended-flavor-child"),value:e.notes,onChange:e=>m(t,n,"notes",e),className:"cjc-ingredient-notes"})),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.Button,{icon:"no-alt",label:(0,l.__)("Remove","suspended-flavor-child"),onClick:()=>((e,t)=>{const l=[...u];l[e]={...l[e],items:l[e].items.filter((e,l)=>l!==t)},_(l)})(t,n),isSmall:!0})))))),(0,a.createElement)(r.Button,{icon:"plus",onClick:()=>(e=>{const t=[...u];t[e]={...t[e],items:[...t[e].items,{...d}]},_(t)})(t),variant:"secondary",className:"cjc-add-ingredient-btn"},(0,l.__)("Add Ingredient","suspended-flavor-child")))),(0,a.createElement)(r.Button,{icon:"plus-alt2",onClick:()=>{_([...u,{title:"",items:[]}])},variant:"tertiary",className:"cjc-add-group-btn"},(0,l.__)("Add Ingredient Group","suspended-flavor-child")))}const _={text:""};function m({instructions:e=[],onChange:t}){const[c,i]=(0,n.useState)(null),s=e.length>0?e:[{title:"",steps:[]}],o=e=>{t(e)},d=()=>{i(null)};return(0,a.createElement)("div",{className:"cjc-instructions-editor"},s.map((e,t)=>(0,a.createElement)("div",{key:t,className:"cjc-instructions-group"},s.length>1&&(0,a.createElement)(r.Flex,{className:"cjc-instructions-group-header"},(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)(r.TextControl,{placeholder:(0,l.__)("Section title (optional)","suspended-flavor-child"),value:e.title,onChange:e=>((e,t)=>{const l=[...s];l[e]={...l[e],title:t},o(l)})(t,e)})),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.Button,{icon:"trash",label:(0,l.__)("Remove section","suspended-flavor-child"),onClick:()=>(e=>{if(s.length<=1)return;const t=s.filter((t,l)=>l!==e);o(t)})(t),isDestructive:!0}))),(0,a.createElement)("div",{className:"cjc-instructions-list"},e.steps.map((e,n)=>(0,a.createElement)("div",{key:n,className:"cjc-instruction-step",draggable:!0,onDragStart:e=>((e,t,l)=>{i({group:t,step:l}),e.dataTransfer.effectAllowed="move"})(e,t,n),onDragOver:e=>((e,t,l)=>{e.preventDefault(),c?.group===t&&c.step!==l&&(((e,t,l)=>{if(t===l)return;const a=[...s],n=[...a[e].steps],[c]=n.splice(t,1);n.splice(l,0,c),a[e]={...a[e],steps:n},o(a)})(t,c.step,l),i({group:t,step:l}))})(e,t,n),onDragEnd:d},(0,a.createElement)("div",{className:"cjc-instruction-step-header"},(0,a.createElement)("span",{className:"cjc-instruction-drag-handle dashicons dashicons-menu"}),(0,a.createElement)("span",{className:"cjc-instruction-step-number"},(0,l.__)("Step","suspended-flavor-child")," ",((e,t)=>{let l=0;for(let t=0;t<e;t++)l+=s[t].steps.length;return l+t+1})(t,n)),(0,a.createElement)(r.Button,{icon:"no-alt",label:(0,l.__)("Remove step","suspended-flavor-child"),onClick:()=>((e,t)=>{const l=[...s];l[e]={...l[e],steps:l[e].steps.filter((e,l)=>l!==t)},o(l)})(t,n),isSmall:!0})),(0,a.createElement)(r.TextareaControl,{value:e.text,onChange:e=>((e,t,l)=>{const a=[...s],n=[...a[e].steps];n[t]={...n[t],text:l},a[e]={...a[e],steps:n},o(a)})(t,n,e),placeholder:(0,l.__)("Describe this step...","suspended-flavor-child"),rows:3})))),(0,a.createElement)(r.Button,{icon:"plus",onClick:()=>(e=>{const t=[...s];t[e]={...t[e],steps:[...t[e].steps,{..._}]},o(t)})(t),variant:"secondary",className:"cjc-add-step-btn"},(0,l.__)("Add Step","suspended-flavor-child")))),(0,a.createElement)(r.Button,{icon:"plus-alt2",onClick:()=>{o([...s,{title:"",steps:[]}])},variant:"tertiary",className:"cjc-add-group-btn"},(0,l.__)("Add Instruction Section","suspended-flavor-child")))}function h({prepTime:e,cookTime:t,totalTime:n,recipeYield:c,yieldNumber:i,onChange:s}){return(0,a.createElement)("div",{className:"cjc-times-editor"},(0,a.createElement)(r.Flex,{gap:4,wrap:!0},(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.TextControl,{label:(0,l.__)("Prep Time","suspended-flavor-child"),value:e,onChange:e=>s("prep_time",e),placeholder:(0,l.__)("e.g., 15 minutes","suspended-flavor-child"),className:"cjc-time-input"})),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.TextControl,{label:(0,l.__)("Cook Time","suspended-flavor-child"),value:t,onChange:e=>s("cook_time",e),placeholder:(0,l.__)("e.g., 30 minutes","suspended-flavor-child"),className:"cjc-time-input"})),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.TextControl,{label:(0,l.__)("Total Time","suspended-flavor-child"),value:n,onChange:e=>s("total_time",e),placeholder:(0,l.__)("e.g., 45 minutes","suspended-flavor-child"),help:(0,l.__)("Leave blank to auto-calculate","suspended-flavor-child"),className:"cjc-time-input"}))),(0,a.createElement)(r.Flex,{gap:4,wrap:!0,style:{marginTop:"16px"}},(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.TextControl,{label:(0,l.__)("Yield","suspended-flavor-child"),value:c,onChange:e=>s("yield",e),placeholder:(0,l.__)("e.g., 4 servings","suspended-flavor-child"),className:"cjc-yield-input"})),(0,a.createElement)(r.FlexItem,null,r.__experimentalNumberControl?(0,a.createElement)(r.__experimentalNumberControl,{label:(0,l.__)("Servings Number","suspended-flavor-child"),value:i,onChange:e=>s("yield_number",parseInt(e,10)||0),min:1,max:100,help:(0,l.__)("Used for scaling","suspended-flavor-child"),className:"cjc-yield-number-input"}):(0,a.createElement)(r.TextControl,{label:(0,l.__)("Servings Number","suspended-flavor-child"),value:i,onChange:e=>s("yield_number",parseInt(e,10)||0),type:"number",min:1,max:100,help:(0,l.__)("Used for scaling","suspended-flavor-child"),className:"cjc-yield-number-input"}))))}const v=[{key:"serving_size",label:(0,l.__)("Serving Size","suspended-flavor-child"),placeholder:"e.g., 1 cup"},{key:"calories",label:(0,l.__)("Calories","suspended-flavor-child"),placeholder:"e.g., 250"},{key:"fat",label:(0,l.__)("Total Fat","suspended-flavor-child"),placeholder:"e.g., 12g"},{key:"saturated_fat",label:(0,l.__)("Saturated Fat","suspended-flavor-child"),placeholder:"e.g., 4g"},{key:"unsaturated_fat",label:(0,l.__)("Unsaturated Fat","suspended-flavor-child"),placeholder:"e.g., 8g"},{key:"trans_fat",label:(0,l.__)("Trans Fat","suspended-flavor-child"),placeholder:"e.g., 0g"},{key:"cholesterol",label:(0,l.__)("Cholesterol","suspended-flavor-child"),placeholder:"e.g., 45mg"},{key:"sodium",label:(0,l.__)("Sodium","suspended-flavor-child"),placeholder:"e.g., 480mg"},{key:"carbohydrates",label:(0,l.__)("Total Carbohydrates","suspended-flavor-child"),placeholder:"e.g., 30g"},{key:"fiber",label:(0,l.__)("Dietary Fiber","suspended-flavor-child"),placeholder:"e.g., 3g"},{key:"sugar",label:(0,l.__)("Sugars","suspended-flavor-child"),placeholder:"e.g., 8g"},{key:"protein",label:(0,l.__)("Protein","suspended-flavor-child"),placeholder:"e.g., 15g"}];function g({nutrition:e={},onChange:t}){return(0,a.createElement)(r.PanelBody,{title:(0,l.__)("Nutrition Information","suspended-flavor-child"),initialOpen:!1},(0,a.createElement)("p",{className:"components-base-control__help"},(0,l.__)("Enter nutritional values per serving. Include units (g, mg, etc.)","suspended-flavor-child")),v.map(l=>(0,a.createElement)(r.TextControl,{key:l.key,label:l.label,value:e[l.key]||"",onChange:e=>t(l.key,e),placeholder:l.placeholder})))}const f={title:"",description:"",prep_time:"",cook_time:"",total_time:"",yield:"",yield_number:4,category:"",cuisine:"",method:"",diet:"",keywords:"",ingredients:[{title:"",items:[]}],instructions:[{title:"",steps:[]}],notes:"",video_url:"",image_id:0,image_url:"",nutrition:{serving_size:"",calories:"",sugar:"",sodium:"",fat:"",saturated_fat:"",unsaturated_fat:"",trans_fat:"",carbohydrates:"",fiber:"",protein:"",cholesterol:""}};(0,t.registerBlockType)("cjc/recipe",{title:(0,l.__)("CJC Recipe","suspended-flavor-child"),description:(0,l.__)("Display an interactive recipe card.","suspended-flavor-child"),category:"widgets",icon:"food",keywords:[(0,l.__)("recipe","suspended-flavor-child"),(0,l.__)("cooking","suspended-flavor-child"),(0,l.__)("food","suspended-flavor-child")],supports:{html:!1,align:["wide","full"]},attributes:{recipeId:{type:"number",default:0}},edit:function({attributes:e,setAttributes:t,clientId:s}){const{recipeId:d}=e,[p,_]=(0,n.useState)(f),[v,E]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[C,j]=(0,n.useState)(!1),[k,N]=(0,n.useState)(!1),[w,x]=(0,n.useState)([]),[T,S]=(0,n.useState)(null),{createSuccessNotice:F,createErrorNotice:I}=(0,c.useDispatch)("core/notices");(0,n.useEffect)(()=>{d&&R(d)},[d]),(0,n.useEffect)(()=>{k&&B()},[k]);const R=async e=>{E(!0),S(null);try{const t=await o()({path:`/cjc/v1/recipes/${e}`});_({...f,...t}),j(!1)}catch(e){S((0,l.__)("Failed to load recipe data.","suspended-flavor-child")),console.error("Error loading recipe:",e)}E(!1)},B=async()=>{try{const e=await o()({path:"/cjc/v1/recipes?per_page=100"});x(e)}catch(e){console.error("Error loading recipes:",e)}},D=async()=>{if(d){y(!0),S(null);try{await o()({path:`/wp/v2/cjc-recipes/${d}`,method:"POST",data:{title:p.title,meta:{_cjc_recipe_description:p.description,_cjc_recipe_prep_time:p.prep_time,_cjc_recipe_cook_time:p.cook_time,_cjc_recipe_total_time:p.total_time,_cjc_recipe_yield:p.yield,_cjc_recipe_yield_number:p.yield_number,_cjc_recipe_category:p.category,_cjc_recipe_cuisine:p.cuisine,_cjc_recipe_method:p.method,_cjc_recipe_diet:p.diet,_cjc_recipe_keywords:p.keywords,_cjc_recipe_ingredients:JSON.stringify(p.ingredients),_cjc_recipe_instructions:JSON.stringify(p.instructions),_cjc_recipe_notes:p.notes,_cjc_recipe_video_url:p.video_url,_cjc_recipe_serving_size:p.nutrition.serving_size,_cjc_recipe_calories:p.nutrition.calories,_cjc_recipe_sugar:p.nutrition.sugar,_cjc_recipe_sodium:p.nutrition.sodium,_cjc_recipe_fat:p.nutrition.fat,_cjc_recipe_saturated_fat:p.nutrition.saturated_fat,_cjc_recipe_unsaturated_fat:p.nutrition.unsaturated_fat,_cjc_recipe_trans_fat:p.nutrition.trans_fat,_cjc_recipe_carbohydrates:p.nutrition.carbohydrates,_cjc_recipe_fiber:p.nutrition.fiber,_cjc_recipe_protein:p.nutrition.protein,_cjc_recipe_cholesterol:p.nutrition.cholesterol}}}),p.image_id&&await o()({path:`/wp/v2/cjc-recipes/${d}`,method:"POST",data:{featured_media:p.image_id}}),j(!1),F((0,l.__)("Recipe saved!","suspended-flavor-child"),{type:"snackbar"})}catch(e){S((0,l.__)("Failed to save recipe.","suspended-flavor-child")),I((0,l.__)("Failed to save recipe.","suspended-flavor-child"),{type:"snackbar"}),console.error("Error saving recipe:",e)}y(!1)}},L=(e,t)=>{_(l=>({...l,[e]:t})),j(!0)};return d?v?(0,a.createElement)("div",{className:"cjc-recipe-editor-loading"},(0,a.createElement)(r.Spinner,null),(0,a.createElement)("p",null,(0,l.__)("Loading recipe...","suspended-flavor-child"))):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(i.BlockControls,null,(0,a.createElement)(r.ToolbarGroup,null,(0,a.createElement)(r.ToolbarButton,{icon:"update",label:(0,l.__)("Save Recipe","suspended-flavor-child"),onClick:D,disabled:!C||b}),(0,a.createElement)(r.ToolbarButton,{icon:"randomize",label:(0,l.__)("Change Recipe","suspended-flavor-child"),onClick:()=>N(!0)}))),(0,a.createElement)(i.InspectorControls,null,(0,a.createElement)(r.Panel,null,(0,a.createElement)(r.PanelBody,{title:(0,l.__)("Recipe Details","suspended-flavor-child"),initialOpen:!0},(0,a.createElement)(r.TextControl,{label:(0,l.__)("Category","suspended-flavor-child"),value:p.category,onChange:e=>L("category",e),placeholder:(0,l.__)("e.g., Main Course, Dessert","suspended-flavor-child")}),(0,a.createElement)(r.TextControl,{label:(0,l.__)("Cuisine","suspended-flavor-child"),value:p.cuisine,onChange:e=>L("cuisine",e),placeholder:(0,l.__)("e.g., Hawaiian, Asian","suspended-flavor-child")}),(0,a.createElement)(r.TextControl,{label:(0,l.__)("Method","suspended-flavor-child"),value:p.method,onChange:e=>L("method",e),placeholder:(0,l.__)("e.g., Grilling, Baking","suspended-flavor-child")}),(0,a.createElement)(r.SelectControl,{label:(0,l.__)("Diet","suspended-flavor-child"),value:p.diet,onChange:e=>L("diet",e),options:[{label:(0,l.__)("N/A","suspended-flavor-child"),value:""},{label:(0,l.__)("Diabetic","suspended-flavor-child"),value:"Diabetic"},{label:(0,l.__)("Gluten Free","suspended-flavor-child"),value:"Gluten Free"},{label:(0,l.__)("Halal","suspended-flavor-child"),value:"Halal"},{label:(0,l.__)("Hindu","suspended-flavor-child"),value:"Hindu"},{label:(0,l.__)("Kosher","suspended-flavor-child"),value:"Kosher"},{label:(0,l.__)("Low Calorie","suspended-flavor-child"),value:"Low Calorie"},{label:(0,l.__)("Low Fat","suspended-flavor-child"),value:"Low Fat"},{label:(0,l.__)("Low Lactose","suspended-flavor-child"),value:"Low Lactose"},{label:(0,l.__)("Low Salt","suspended-flavor-child"),value:"Low Salt"},{label:(0,l.__)("Vegan","suspended-flavor-child"),value:"Vegan"},{label:(0,l.__)("Vegetarian","suspended-flavor-child"),value:"Vegetarian"}]}),(0,a.createElement)(r.TextControl,{label:(0,l.__)("Keywords","suspended-flavor-child"),value:p.keywords,onChange:e=>L("keywords",e),placeholder:(0,l.__)("summer, quick, easy","suspended-flavor-child"),help:(0,l.__)("Comma-separated keywords for SEO","suspended-flavor-child")})),(0,a.createElement)(r.PanelBody,{title:(0,l.__)("Video","suspended-flavor-child"),initialOpen:!1},(0,a.createElement)(r.TextControl,{label:(0,l.__)("Video URL","suspended-flavor-child"),value:p.video_url,onChange:e=>L("video_url",e),placeholder:"https://youtube.com/watch?v=..."})),(0,a.createElement)(g,{nutrition:p.nutrition,onChange:(e,t)=>{_(l=>({...l,nutrition:{...l.nutrition,[e]:t}})),j(!0)}}))),(0,a.createElement)("div",{className:"cjc-recipe-editor"},T&&(0,a.createElement)(r.Notice,{status:"error",isDismissible:!0,onRemove:()=>S(null)},T),C&&(0,a.createElement)(r.Notice,{status:"warning",isDismissible:!1},(0,l.__)("You have unsaved changes.","suspended-flavor-child"),(0,a.createElement)(r.Button,{variant:"primary",onClick:D,disabled:b,style:{marginLeft:"10px"}},b?(0,a.createElement)(r.Spinner,null):(0,l.__)("Save Recipe","suspended-flavor-child"))),(0,a.createElement)("div",{className:"cjc-recipe-editor-header"},(0,a.createElement)("div",{className:"cjc-recipe-editor-image"},(0,a.createElement)(i.MediaUploadCheck,null,(0,a.createElement)(i.MediaUpload,{onSelect:e=>{L("image_id",e.id),L("image_url",e.url)},allowedTypes:["image"],value:p.image_id,render:({open:e})=>(0,a.createElement)("div",{className:"cjc-recipe-editor-image-wrapper",onClick:e},p.image_url?(0,a.createElement)("img",{src:p.image_url,alt:""}):(0,a.createElement)("div",{className:"cjc-recipe-editor-image-placeholder"},(0,a.createElement)("span",{className:"dashicons dashicons-format-image"}),(0,a.createElement)("span",null,(0,l.__)("Click to add image","suspended-flavor-child"))))}))),(0,a.createElement)("div",{className:"cjc-recipe-editor-title-area"},(0,a.createElement)(r.TextControl,{label:(0,l.__)("Recipe Title","suspended-flavor-child"),value:p.title,onChange:e=>L("title",e),placeholder:(0,l.__)("Enter recipe title...","suspended-flavor-child"),className:"cjc-recipe-editor-title-input"}),(0,a.createElement)(r.TextareaControl,{label:(0,l.__)("Description","suspended-flavor-child"),value:p.description,onChange:e=>L("description",e),placeholder:(0,l.__)("A brief description of this recipe...","suspended-flavor-child"),rows:3}))),(0,a.createElement)(h,{prepTime:p.prep_time,cookTime:p.cook_time,totalTime:p.total_time,recipeYield:p.yield,yieldNumber:p.yield_number,onChange:L}),(0,a.createElement)("div",{className:"cjc-recipe-editor-section"},(0,a.createElement)("h3",null,(0,l.__)("Ingredients","suspended-flavor-child")),(0,a.createElement)(u,{ingredients:p.ingredients,onChange:e=>L("ingredients",e)})),(0,a.createElement)("div",{className:"cjc-recipe-editor-section"},(0,a.createElement)("h3",null,(0,l.__)("Instructions","suspended-flavor-child")),(0,a.createElement)(m,{instructions:p.instructions,onChange:e=>L("instructions",e)})),(0,a.createElement)("div",{className:"cjc-recipe-editor-section"},(0,a.createElement)("h3",null,(0,l.__)("Notes","suspended-flavor-child")),(0,a.createElement)(r.TextareaControl,{value:p.notes,onChange:e=>L("notes",e),placeholder:(0,l.__)("Add tips, variations, or storage instructions...","suspended-flavor-child"),rows:4}))),k&&(0,a.createElement)(r.Modal,{title:(0,l.__)("Select Recipe","suspended-flavor-child"),onRequestClose:()=>N(!1)},(0,a.createElement)("div",{className:"cjc-recipe-selector"},0===w.length?(0,a.createElement)("p",null,(0,l.__)("No recipes found.","suspended-flavor-child")):(0,a.createElement)("ul",{className:"cjc-recipe-list"},w.map(e=>(0,a.createElement)("li",{key:e.id},(0,a.createElement)(r.Button,{variant:e.id===d?"primary":"link",onClick:()=>{t({recipeId:e.id}),N(!1)}},e.title||(0,l.__)("Untitled Recipe","suspended-flavor-child")))))))):(0,a.createElement)("div",{className:"cjc-recipe-editor-placeholder"},(0,a.createElement)(r.Placeholder,{icon:"food",label:(0,l.__)("CJC Recipe","suspended-flavor-child"),instructions:(0,l.__)("Create a new recipe or select an existing one.","suspended-flavor-child")},(0,a.createElement)(r.Button,{variant:"primary",onClick:async()=>{E(!0),S(null);try{const e=await o()({path:"/wp/v2/cjc-recipes",method:"POST",data:{title:(0,l.__)("New Recipe","suspended-flavor-child"),status:"publish"}});t({recipeId:e.id}),_({...f,title:e.title.rendered}),j(!1),F((0,l.__)("Recipe created!","suspended-flavor-child"),{type:"snackbar"})}catch(e){S((0,l.__)("Failed to create recipe.","suspended-flavor-child")),console.error("Error creating recipe:",e)}E(!1)},disabled:v},v?(0,a.createElement)(r.Spinner,null):(0,l.__)("Create New Recipe","suspended-flavor-child")),(0,a.createElement)(r.Button,{variant:"secondary",onClick:()=>N(!0)},(0,l.__)("Select Existing Recipe","suspended-flavor-child"))),k&&(0,a.createElement)(r.Modal,{title:(0,l.__)("Select Recipe","suspended-flavor-child"),onRequestClose:()=>N(!1)},(0,a.createElement)("div",{className:"cjc-recipe-selector"},0===w.length?(0,a.createElement)("p",null,(0,l.__)("No recipes found.","suspended-flavor-child")):(0,a.createElement)("ul",{className:"cjc-recipe-list"},w.map(e=>(0,a.createElement)("li",{key:e.id},(0,a.createElement)(r.Button,{variant:"link",onClick:()=>{t({recipeId:e.id}),N(!1)}},e.title||(0,l.__)("Untitled Recipe","suspended-flavor-child"))))))))},save:function(){return null}})})();